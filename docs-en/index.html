<!DOCTYPE html><html class="default no-js"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>trtc-react-native</title><meta name="description" content="Documentation for trtc-react-native"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem(&quot;tsd-theme&quot;) || &quot;os&quot;)</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">trtc-react-native</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1> trtc-react-native</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#trtc-react-native" id="trtc-react-native" style="color: inherit; text-decoration: none;">
  <h1>trtc-react-native</h1>
</a>
<p>The SDK for React Native is packaged from the TRTC SDK for iOS and Android. It supports only audio calls currently, and is expected to enable video calls as well in the future.</p>

<a href="#sdk-class-files" id="sdk-class-files" style="color: inherit; text-decoration: none;">
  <h3>SDK class files</h3>
</a>
<ul>
<li>index: main TRTC API classes</li>
<li>tx_audio_effect_manager: music and audio effect APIs</li>
<li>tx_device_manager: device management class</li>
<li>trtc_cloud_def: definitions of key TRTC types</li>
<li>trtc_cloud_listener: TRTC event callback APIs</li>
</ul>

<a href="#sample-calls" id="sample-calls" style="color: inherit; text-decoration: none;">
  <h3>Sample calls</h3>
</a>
<ol>
<li><p>Initialization</p>
<pre><code><span class="hl-0">// Create a `TRTCCloud` singleton</span><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">trtcCloud</span><span class="hl-2"> = </span><span class="hl-4">TRTCCloud</span><span class="hl-2">.</span><span class="hl-5">sharedInstance</span><span class="hl-2">();</span><br/><span class="hl-0">// Get the device management module</span><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">txDeviceManager</span><span class="hl-2"> = </span><span class="hl-4">trtcCloud</span><span class="hl-2">.</span><span class="hl-5">getDeviceManager</span><span class="hl-2">();</span><br/><span class="hl-0">// Get the audio effect management class</span><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">txAudioManager</span><span class="hl-2"> = </span><span class="hl-4">trtcCloud</span><span class="hl-2">.</span><span class="hl-5">getAudioEffectManager</span><span class="hl-2">();</span>
</code></pre>
</li>
<li><p>Room entry/exit</p>
<pre><code><span class="hl-0">// Enter a room</span><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-3">params</span><span class="hl-2"> = </span><span class="hl-1">new</span><span class="hl-2"> </span><span class="hl-5">TRTCParams</span><span class="hl-2">({</span><br/><span class="hl-2">     </span><span class="hl-4">sdkAppId:</span><span class="hl-2"> </span><span class="hl-3">SDKAPPID</span><span class="hl-2">,</span><span class="hl-0">//Application ID</span><br/><span class="hl-2">     </span><span class="hl-4">userId</span><span class="hl-2">,</span><span class="hl-0">//User ID</span><br/><span class="hl-2">     </span><span class="hl-4">userSig</span><span class="hl-2">,</span><span class="hl-0">//User signature</span><br/><span class="hl-2">     </span><span class="hl-4">roomId:</span><span class="hl-2"> </span><span class="hl-6">2366</span><span class="hl-2">,</span><span class="hl-0">//Room ID</span><br/><span class="hl-2">   });</span><br/><span class="hl-2">   </span><span class="hl-4">trtcCloud</span><span class="hl-2">.</span><span class="hl-5">enterRoom</span><span class="hl-2">(</span><span class="hl-4">params</span><span class="hl-2">, </span><span class="hl-4">TRTCCloudDef</span><span class="hl-2">.</span><span class="hl-3">TRTC_APP_SCENE_VIDEOCALL</span><span class="hl-2">);</span><br/><span class="hl-0">// Leave a room</span><br/><span class="hl-4">trtcCloud</span><span class="hl-2">.</span><span class="hl-5">exitRoom</span><span class="hl-2">();</span>
</code></pre>
</li>
<li><p>Listener registration
```
// Register a listener
trtcCloud.registerListener(onRtcListener);</p>
</li>
</ol>
<p>function onRtcListener(type: TRTCCloudListener, params: any) {
  // Callback for room entry
  if (type === TRTCCloudListener.onEnterRoom) {
    if (params.result &gt; 0) {
      // Entered room successfully
    }
  }
  // Callback for the entry of a remote user
  if (type === TRTCCloudListener.onRemoteUserEnterRoom) {
    //params.userId: ID of the remote user
  }
  //Whether a remote user’s mic is turned on
  if (type === TRTCCloudListener.onUserAudioAvailable) {
    //param.userId: ID of the remote user
    //param.visible: <code>true</code> indicates that the user’s mic is turned on.
  }
}
// Unregister a listener
trtcCloud.unRegisterListener(onRtcListener);</p>
<pre><code><br/><span class="hl-2">### </span><span class="hl-4">Android</span><span class="hl-2"> </span><span class="hl-4">development</span><span class="hl-2"> </span><span class="hl-4">environment</span><br/><span class="hl-4">You</span><span class="hl-2"> </span><span class="hl-4">can</span><span class="hl-2"> </span><span class="hl-4">refer</span><span class="hl-2"> </span><span class="hl-4">to</span><span class="hl-2"> </span><span class="hl-4">React</span><span class="hl-2"> </span><span class="hl-4">Native</span><span class="hl-2">’</span><span class="hl-4">s</span><span class="hl-2"> [</span><span class="hl-4">official</span><span class="hl-2"> </span><span class="hl-4">document</span><span class="hl-2">](</span><span class="hl-4">https</span><span class="hl-2">:</span><span class="hl-0">//reactnative.dev/docs/environment-setup) to set up a development environment for Android.</span><br/><span class="hl-4">Note</span><span class="hl-2">: </span><span class="hl-4">You</span><span class="hl-2"> </span><span class="hl-4">must</span><span class="hl-2"> </span><span class="hl-4">debug</span><span class="hl-2"> </span><span class="hl-4">your</span><span class="hl-2"> </span><span class="hl-4">project</span><span class="hl-2"> </span><span class="hl-4">on</span><span class="hl-2"> </span><span class="hl-4">a</span><span class="hl-2"> </span><span class="hl-4">real</span><span class="hl-2"> </span><span class="hl-4">device</span><span class="hl-2">.</span><br/><span class="hl-2">#### </span><span class="hl-4">Configuring</span><span class="hl-2"> </span><span class="hl-4">app</span><span class="hl-2"> </span><span class="hl-4">permissions</span><br/><span class="hl-4">Configure</span><span class="hl-2"> </span><span class="hl-4">application</span><span class="hl-2"> </span><span class="hl-4">permissions</span><span class="hl-2"> </span><span class="hl-1">in</span><span class="hl-2"> </span><span class="hl-7">`AndroidManifest.xml`</span><span class="hl-2">. </span><span class="hl-4">The</span><span class="hl-2"> </span><span class="hl-3">TRTC</span><span class="hl-2"> </span><span class="hl-3">SDK</span><span class="hl-2"> </span><span class="hl-4">requires</span><span class="hl-2"> </span><span class="hl-4">the</span><span class="hl-2"> </span><span class="hl-4">following</span><span class="hl-2"> </span><span class="hl-4">permissions</span><span class="hl-2">:</span><br/>
</code></pre>
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
<uses-permission android:name="android.permission.BLUETOOTH" />
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-feature android:name="android.hardware.camera" />
<uses-feature android:name="android.hardware.camera.autofocus" />
```

<blockquote>
<p>! Do not set <code>android:hardwareAccelerated=&quot;false&quot;</code>. Disabling hardware acceleration will result in failure to render remote users’ videos.</p>
</blockquote>
<pre><code><span class="hl-0">// You need to request audio and video permissions manually for Android.</span><br/><span class="hl-8">if</span><span class="hl-2"> (</span><span class="hl-4">Platform</span><span class="hl-2">.</span><span class="hl-3">OS</span><span class="hl-2"> === </span><span class="hl-7">&#39;android&#39;</span><span class="hl-2">) {</span><br/><span class="hl-2">  </span><span class="hl-8">await</span><span class="hl-2"> </span><span class="hl-4">PermissionsAndroid</span><span class="hl-2">.</span><span class="hl-5">requestMultiple</span><span class="hl-2">([</span><br/><span class="hl-2">    </span><span class="hl-4">PermissionsAndroid</span><span class="hl-2">.</span><span class="hl-3">PERMISSIONS</span><span class="hl-2">.</span><span class="hl-3">RECORD_AUDIO</span><span class="hl-2">, </span><span class="hl-0">//For audio calls</span><br/><span class="hl-2">    </span><span class="hl-0">// PermissionsAndroid.PERMISSIONS.CAMERA, // For video calls</span><br/><span class="hl-2">  ]);</span><br/><span class="hl-2">}</span>
</code></pre>

<a href="#developing-and-debugging" id="developing-and-debugging" style="color: inherit; text-decoration: none;">
  <h4>Developing and debugging</h4>
</a>
<p>1.To start Metro, run npx react-native start inside your React Native project folder</p>
<pre><code><span class="hl-4">npx</span><span class="hl-2"> </span><span class="hl-4">react</span><span class="hl-2">-</span><span class="hl-4">native</span><span class="hl-2"> </span><span class="hl-4">start</span>
</code></pre>
<p>2.Let Metro Bundler run in its own terminal. Open a new terminal inside your React Native project folder. Run the following</p>
<pre><code><span class="hl-4">npx</span><span class="hl-2"> </span><span class="hl-4">react</span><span class="hl-2">-</span><span class="hl-4">native</span><span class="hl-2"> </span><span class="hl-4">run</span><span class="hl-2">-</span><span class="hl-4">android</span>
</code></pre>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Modules</a></li><li class=" tsd-kind-module"><a href="modules/trtc_cloud.html">trtc_<wbr/>cloud</a></li><li class=" tsd-kind-module"><a href="modules/tx_audio_effect_manager.html">tx_<wbr/>audio_<wbr/>effect_<wbr/>manager</a></li><li class=" tsd-kind-module"><a href="modules/tx_device_manager.html">tx_<wbr/>device_<wbr/>manager</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>